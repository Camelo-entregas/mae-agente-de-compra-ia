<!DOCTYPE html>
<html lang="pt-br">
<head>
    <!-- ... (todo o cabeçalho original permanece igual) ... -->
</head>
<body>
    <!-- ... (todo o corpo original permanece igual até o script) ... -->

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Função para corrigir URLs de imagens (nova adição)
            function corrigirUrlImagem(url) {
                if(!url) return url;
                
                // Se for imagem da Amazon, usa um proxy
                if(url.includes('media-amazon.com')) {
                    return `https://images.weserv.nl/?url=${encodeURIComponent(url.replace('https://', ''))}&w=600`;
                }
                return url;
            }

            const headerDestaque = document.getElementById('header-destaque');
            const destaqueHeaderContainer = document.getElementById('destaque-header-container');
            const produtosContainer = document.getElementById('produtos-container');
            
            // Carrega dados do localStorage
            const produtos = JSON.parse(localStorage.getItem('produtosMaeIA') || '[]');
            const destaquePrincipal = JSON.parse(localStorage.getItem('destaquePrincipalMaeIA') || null);
            
            // Exibe o produto em destaque no cabeçalho (modificado)
            if (destaquePrincipal && destaquePrincipal.produto) {
                const produto = destaquePrincipal.produto;
                const imagemCorrigida = corrigirUrlImagem(produto.imagem);
                
                headerDestaque.style.backgroundImage = `linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('${imagemCorrigida}')`;
                
                destaqueHeaderContainer.innerHTML = `
                    <div class="destaque-header">
                        <div class="destaque-header-img">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 300'%3E%3Crect width='400' height='300' fill='%23f5f5f5'/%3E%3C/svg%3E" 
                                 data-src="${imagemCorrigida}" 
                                 alt="${produto.nome}" 
                                 loading="lazy"
                                 onerror="this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 400 300\'%3E%3Crect width=\'400\' height=\'300\' fill=\'%23f5f5f5\'/%3E%3Ctext x=\'50%25\' y=\'50%25\' font-family=\'Arial\' font-size=\'16\' fill=\'%23666\' text-anchor=\'middle\'%3EImagem não disponível%3C/text%3E%3C/svg%3E';this.onerror=null;">
                        </div>
                        <div class="destaque-header-info">
                            <span class="destaque-header-tag">OFERTA DO DIA</span>
                            <h2 class="destaque-header-title">${produto.nome}</h2>
                            ${produto.preco ? `<div class="destaque-header-price">${produto.preco}</div>` : ''}
                            <a href="${produto.link}" target="_blank" class="btn-comprar">COMPRAR AGORA</a>
                        </div>
                    </div>
                `;
            } else {
                headerDestaque.style.backgroundImage = `linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://img.freepik.com/fotos-premium/assistente-moderno-de-inteligencia-artificial-nos-negocios-um-otimo-design-para-todos-os-fins_155807-8460.jpg')`;
                destaqueHeaderContainer.innerHTML = '';
            }
            
            // Exibe a lista de produtos (modificado)
            if (produtos.length > 0) {
                produtosContainer.innerHTML = produtos.map(produto => {
                    const imagemCorrigida = corrigirUrlImagem(produto.imagem);
                    return `
                    <div class="produto-card">
                        ${produto.destaque ? '<span class="produto-oferta">OFERTA</span>' : ''}
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 250 200'%3E%3Crect width='250' height='200' fill='%23f5f5f5'/%3E%3C/svg%3E" 
                             data-src="${imagemCorrigida}" 
                             alt="${produto.nome}" 
                             loading="lazy"
                             onerror="this.src='data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 250 200\'%3E%3Crect width=\'250\' height=\'200\' fill=\'%23f5f5f5\'/%3E%3Ctext x=\'50%25\' y=\'50%25\' font-family=\'Arial\' font-size=\'14\' fill=\'%23666\' text-anchor=\'middle\'%3EImagem não disponível%3C/text%3E%3C/svg%3E';this.onerror=null;">
                        <h3>${produto.nome}</h3>
                        <div class="produto-preco">${produto.preco ? 'R$ ' + produto.preco : 'Consultar preço'}</div>
                        <a href="${produto.link}" target="_blank" class="btn-comprar">Comprar</a>
                    </div>
                    `;
                }).join('');

                // Carrega as imagens quando estiverem visíveis (nova adição)
                const lazyImages = document.querySelectorAll('img[data-src]');
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            img.src = img.dataset.src;
                            observer.unobserve(img);
                        }
                    });
                });

                lazyImages.forEach(img => observer.observe(img));
            } else {
                produtosContainer.innerHTML = '<p style="text-align:center; grid-column:1/-1; color:#666">Em breve novas recomendações para você!</p>';
            }
        });
    </script>
</body>
</html>